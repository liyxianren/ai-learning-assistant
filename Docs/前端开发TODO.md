# 前端开发 TODO.md

## 项目结构

```
ai-learning-assistant/
├── index.html          # 主页面
├── css/
│   └── style.css       # 样式文件
├── js/
│   ├── main.js         # 主入口
│   ├── api.js          # API调用封装
│   ├── imageHandler.js # 图片处理
│   └── ui.js           # UI交互
└── config/
    └── config.js       # 配置文件（API密钥等）
```

---

## 任务清单

### 阶段一：项目初始化

- [ ] 1.1 创建项目文件夹结构
  - [ ] 创建 css/ 目录
  - [ ] 创建 js/ 目录
  - [ ] 创建 config/ 目录
  - [ ] 创建 assets/ 目录（存放静态资源）

- [ ] 1.2 创建基础 HTML 文件
  - [ ] 创建 index.html 基础框架
  - [ ] 引入 CSS 和 JS 文件
  - [ ] 设置 viewport 和 meta 标签

---

### 阶段二：界面布局实现

- [ ] 2.1 顶部标题栏
  - [ ] 设计标题样式
  - [ ] 添加 Logo/图标
  - [ ] 响应式适配

- [ ] 2.2 输入方式切换 Tab
  - [ ] 实现 Tab 切换组件
  - [ ] 文字输入 Tab
  - [ ] 图片输入 Tab
  - [ ] 切换动画效果

- [ ] 2.3 文字输入区域
  - [ ] 多行文本输入框
  - [ ] 字数统计
  - [ ] 清空按钮
  - [ ] 占位提示文字

- [ ] 2.4 图片输入区域
  - [ ] 文件选择 input
  - [ ] 拖拽上传区域
  - [ ] 图片预览容器
  - [ ] 删除/更换图片按钮
  - [ ] 支持格式提示（JPG/PNG）

- [ ] 2.5 提交按钮
  - [ ] 按钮样式设计
  - [ ] 加载状态
  - [ ] 禁用状态
  - [ ] 点击事件绑定

---

### 阶段三：图片处理功能

- [ ] 3.1 图片选择功能
  - [ ] FileReader API 读取文件
  - [ ] 文件类型验证
  - [ ] 文件大小限制（建议 5MB）

- [ ] 3.2 图片压缩功能
  - [ ] Canvas 压缩实现
  - [ ] 最大尺寸限制（1024px）
  - [ ] 压缩质量设置（0.8）
  - [ ] 压缩前后大小显示

- [ ] 3.3 Base64 编码
  - [ ] 转换为 Base64 格式
  - [ ] 格式验证
  - [ ] 错误处理

---

### 阶段四：API 调用封装

- [ ] 4.1 配置文件
  - [ ] API 端点配置
  - [ ] 模型参数配置
  - [ ] 超时设置

- [ ] 4.2 通用请求函数
  - [ ] 封装 fetch/axios
  - [ ] 请求拦截器
  - [ ] 响应拦截器
  - [ ] 错误处理

- [ ] 4.3 多模态模型调用
  - [ ] 图像识别 API 封装
  - [ ] Base64 图片传输
  - [ ] Prompt 参数传递

- [ ] 4.4 文本模型调用
  - [ ] 题目解析 API 封装
  - [ ] 解答生成 API 封装
  - [ ] 参数配置

- [ ] 4.5 流式输出支持（可选）
  - [ ] SSE 连接实现
  - [ ] 实时显示结果

---

### 阶段五：多 Agent 协作流程

- [ ] 5.1 状态管理
  - [ ] 当前步骤状态
  - [ ] 加载状态
  - [ ] 错误状态

- [ ] 5.2 步骤指示器
  - [ ] 识别中状态
  - [ ] 解析中状态
  - [ ] 解答中状态
  - [ ] 进度条/动画

- [ ] 5.3 Agent 调用链
  - [ ] Agent 1: 图像识别调用
  - [ ] Agent 2: 题目解析调用
  - [ ] Agent 3: 解答生成调用
  - [ ] 数据传递与处理

- [ ] 5.4 错误处理
  - [ ] 网络错误处理
  - [ ] API 错误处理
  - [ ] 降级方案
  - [ ] 重试机制

---

### 阶段六：结果展示

- [ ] 6.1 题目识别结果卡片
  - [ ] 识别的文本内容
  - [ ] 编辑功能
  - [ ] 折叠/展开

- [ ] 6.2 题目解析结果卡片
  - [ ] 题目类型标签
  - [ ] 学科/知识点标签
  - [ ] 难度等级显示
  - [ ] 前置知识列表

- [ ] 6.3 详细解答卡片
  - [ ] 解题思路分析
  - [ ] 分步骤解答
  - [ ] 最终答案
  - [ ] 知识总结
  - [ ] 代码/公式渲染（可选）

- [ ] 6.4 结果格式化
  - [ ] Markdown 渲染
  - [ ] 数学公式支持（MathJax/KaTeX）
  - [ ] 代码高亮

---

### 阶段七：历史记录功能

- [ ] 7.1 本地存储
  - [ ] localStorage 封装
  - [ ] 数据结构设计
  - [ ] 存储限制处理

- [ ] 7.2 历史记录列表
  - [ ] 列表展示组件
  - [ ] 时间倒序排列
  - [ ] 搜索/筛选功能

- [ ] 7.3 历史记录详情
  - [ ] 查看历史记录
  - [ ] 重新提交功能
  - [ ] 不可删除限制

---

### 阶段八：增强功能

- [ ] 8.1 家长监督功能
  - [ ] 引导式答案展示
  - [ ] 提示而非直接答案
  - [ ] 求助功能按钮

- [ ] 8.2 成就感系统（可选）
  - [ ] "绊脚石"概念展示
  - [ ] "我懂了"按钮
  - [ ] 累积展示

- [ ] 8.3 快捷键支持
  - [ ] Ctrl+Enter 提交
  - [ ] ESC 关闭弹窗
  - [ ] 其他常用快捷键

---

### 阶段九：样式优化

- [ ] 9.1 基础样式
  - [ ] CSS 变量定义
  - [ ] 颜色主题
  - [ ] 字体设置

- [ ] 9.2 响应式设计
  - [ ] 移动端适配
  - [ ] 平板适配
  - [ ] 桌面端适配

- [ ] 9.3 动画效果
  - [ ] 加载动画
  - [ ] 过渡动画
  - [ ] 交互动画

- [ ] 9.4 暗色模式（可选）
  - [ ] 暗色主题样式
  - [ ] 主题切换功能

---

### 阶段十：测试与优化

- [ ] 10.1 功能测试
  - [ ] 文字输入流程测试
  - [ ] 图片上传流程测试
  - [ ] 多 Agent 流程测试

- [ ] 10.2 兼容性测试
  - [ ] Chrome 浏览器
  - [ ] Firefox 浏览器
  - [ ] Safari 浏览器
  - [ ] 移动端浏览器

- [ ] 10.3 性能优化
  - [ ] 图片压缩优化
  - [ ] 代码分割
  - [ ] 懒加载

- [ ] 10.4 错误处理测试
  - [ ] 网络异常测试
  - [ ] API 错误测试
  - [ ] 边界情况测试

---

## 技术要点

### 图片处理
- FileReader API
- Canvas API
- Base64 编码

### API 调用
- Fetch API / Axios
- SSE (Server-Sent Events)
- 错误处理

### 存储
- localStorage
- IndexedDB（可选，用于大量数据）

### UI 框架（可选）
- 原生实现
- 或轻量级框架（如 Alpine.js）

---

## 依赖库（可选）

- [ ] MathJax / KaTeX - 数学公式渲染
- [ ] marked - Markdown 解析
- [ ] highlight.js - 代码高亮
- [ ] axios - HTTP 请求（如不用原生 fetch）

---

## 开发顺序建议

1. 先完成基础 HTML 结构和样式
2. 实现图片上传和压缩功能
3. 封装 API 调用
4. 实现多 Agent 协作流程
5. 完善结果展示
6. 添加历史记录功能
7. 优化样式和交互
8. 测试和修复问题
