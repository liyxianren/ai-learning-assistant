# AI 学习助手网页开发计划

## 项目概述

根据需求文档，这是一个多Agent协作的智能学习助手，支持图片/文字输入题目，通过图像识别Agent、题目解析Agent、解答Agent的协作，为学生提供详细的解题思路和答案。

---

## 阶段一：基础架构搭建

### 1.1 项目结构初始化

```
ai-learning-assistant/
├── index.html          # 主页面
├── css/
│   └── style.css       # 样式文件
├── js/
│   ├── main.js         # 主入口
│   ├── api.js          # API调用封装
│   ├── imageHandler.js # 图片处理
│   └── ui.js           # UI交互
└── config/
    └── config.js       # 配置文件（API密钥等）
```

### 1.2 技术选型

- **前端框架**: 纯HTML5 + CSS3 + JavaScript（无需框架，轻量快速）
- **UI组件**: 原生实现，保持简洁
- **图片处理**: FileReader API + Canvas API
- **AI模型**: 
  - 图像识别: 多模态大模型（如通义千问VL/GPT-4V）
  - 题目解析与解答: DeepSeek API

---

## 阶段二：界面设计与实现

### 2.1 页面布局结构

```
┌─────────────────────────────────────┐
│           顶部标题栏                 │
│      AI 学习助手 - 智能解题         │
├─────────────────────────────────────┤
│         输入方式切换 Tab            │
│    [文字输入]  [图片输入]           │
├─────────────────────────────────────┤
│                                     │
│         输入区域                     │
│   - 文字模式: 多行文本输入框        │
│   - 图片模式: 上传区域 + 预览       │
│                                     │
├─────────────────────────────────────┤
│         [提交按钮]                  │
├─────────────────────────────────────┤
│         结果展示区域                 │
│   ┌─────────────────────────────┐   │
│   │  题目识别结果               │   │
│   └─────────────────────────────┘   │
│   ┌─────────────────────────────┐   │
│   │  题目解析 (类型/知识点)     │   │
│   └─────────────────────────────┘   │
│   ┌─────────────────────────────┐   │
│   │  详细解答 (步骤/答案)       │   │
│   └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 2.2 核心UI组件

1. **输入切换Tab**: 文字输入 ↔ 图片输入
2. **图片上传区域**: 支持拖拽 + 点击选择
3. **图片预览**: 压缩后显示
4. **加载状态**: 步骤指示器（识别中 → 解析中 → 解答中）
5. **结果卡片**: 可折叠的解析结果展示

---

## 阶段三：核心功能实现

### 3.1 图片处理模块

- **功能**: 图片选择 → 预览 → 压缩 → Base64编码
- **关键技术**: 
  - FileReader API 读取文件
  - Canvas 压缩图片（控制API传输大小）
  - Base64 编码供API调用

### 3.2 API调用模块

设计统一的API调用封装，支持：
- 多模态模型调用（图片+文字）
- 纯文本模型调用
- 错误处理和重试机制
- 流式输出（可选优化）

### 3.3 多Agent协作流程

```
用户输入
    ↓
┌─────────────────┐
│ Agent 1: 图像识别 │ ← 如果是图片输入
│ (多模态模型)     │
└─────────────────┘
    ↓ 提取题目文本
┌─────────────────┐
│ Agent 2: 题目解析 │
│ (DeepSeek)      │
│ - 题目类型      │
│ - 学科/知识点   │
│ - 难度评估      │
└─────────────────┘
    ↓ 解析结果
┌─────────────────┐
│ Agent 3: 解答生成 │
│ (DeepSeek)      │
│ - 解题思路      │
│ - 详细步骤      │
│ - 最终答案      │
│ - 知识总结      │
└─────────────────┘
    ↓
整合输出展示
```

---

## 阶段四：Prompt设计与优化

### 4.1 图像识别Agent Prompt

```
你是一位专业的题目识别助手。请仔细识别图片中的题目内容：
1. 提取所有文字、数字、公式
2. 保持题目的原始格式
3. 如果是数学题，保留公式表达式
4. 输出纯文本，不要添加解释
```

### 4.2 题目解析Agent Prompt

```
你是一位经验丰富的教师，请分析以下题目：
1. 判断题目类型（选择/填空/解答/判断）
2. 识别所属学科和涉及的知识点
3. 评估难度等级（简单/中等/困难）
4. 列出解题需要的前置知识
请按JSON格式输出结果。
```

### 4.3 解答Agent Prompt

```
你是一位耐心的AI教师，请基于以下题目解析，为学生提供详细的解答：

题目：[题目内容]
类型：[类型]
知识点：[知识点]

要求：
1. 先给出解题思路分析
2. 分步骤详细解答
3. 给出最终答案
4. 总结相关知识点
5. 像老师一样引导思考，不仅给答案还要解释为什么
```

---

## 阶段五：增强功能（可选）

### 5.1 历史记录功能

- 本地存储（localStorage）所有查询记录
- 时间倒序查看
- 保留原始输入（文字/图片）
- 不可删除（打消家长疑虑）

### 5.2 家长监督功能

- 搜索记录永久保存
- 按日汇总（可扩展为邮件发送）
- 答案引导式输出（不直接给答案，先给提示）
- 求助功能（可向老师/家长发送疑问）

### 5.3 成就感系统（可选扩展）

- 将题目视为"绊脚石"
- 点击"我懂了"攻克
- 根据难度累积不同类型的石头

---

## 阶段六：测试与优化

### 6.1 功能测试

- 文字输入流程测试
- 图片上传/压缩/识别测试
- 多Agent协作流程测试
- 错误处理测试（网络失败、API限流等）

### 6.2 优化项

- 图片压缩比例调优
- API响应速度优化
- 移动端适配优化
- 加载状态用户体验优化

---

## 开发顺序建议

| 阶段 | 任务 | 预计时间 |
|------|------|----------|
| 1 | 项目结构搭建 + 基础HTML框架 | 1课时 |
| 2 | 界面布局 + 样式实现 | 1课时 |
| 3 | 图片上传 + 预览 + 压缩功能 | 1课时 |
| 4 | API封装 + 图像识别Agent | 1课时 |
| 5 | 题目解析Agent + 解答Agent | 1课时 |
| 6 | Agent协作流程整合 | 1课时 |
| 7 | 历史记录 + 增强功能 | 1课时 |
| 8 | 测试优化 + 完善 | 1课时 |

---

## 技术要点提醒

1. **API密钥安全**: 实际部署时需要后端代理，避免前端暴露密钥
2. **图片大小控制**: 压缩至合适大小（建议最大1024px宽，质量0.8）
3. **错误处理**: 每个Agent都需要有降级方案
4. **用户体验**: 添加步骤指示器，让用户知道当前进度
